
@{
    ViewBag.Title = "Index";
}
<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                Monitor Gerencial Copper
                <div class="panel-controls">
                    <a href="javascript:void(0);" data-panel-loading="true" data-loading-effect="rotateplane" data-loading-color="#16a085" data-toggle="tooltip" data-title="Refresh" data-placement="bottom"><i class="fa fa-refresh"></i></a>
                </div>
            </div>
            <div class="panel-body">
                <div class="form-group col-sm-6">
                    <label>Fecha:</label>
                    <input type="date" id="txtFechaConsulta" class="form-control" placeholder="" />
                </div>
                <div class="form-group col-sm-6 col-xs-12 text-center">
                    <br />
                    <a id="btnConsultaAnual" class="m-w-150 btn btn-rounded btn-primary" data-panel-loading="false" data-loading-effect="timer" data-loading-color="#16a085" data-toggle="tooltip" data-placement="bottom">Anual</a>
                    <a id="btnConsultaMensual" class="m-w-150 btn btn-rounded btn-primary">Mes Pasado</a>
                    <a id="btnConsultaHoy" class="m-w-150 btn btn-rounded btn-default">Consultar</a>
                </div>
            </div>

        </div>
    </div>
</div>

<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="panel panel-success">
            <div class="panel-heading">
                Total Gastos - Copper
                <div class="panel-controls">
                    <a href="javascript:void(0);" data-panel-loading="true" data-loading-effect="rotateplane" data-loading-color="#16a085" data-toggle="tooltip" data-title="Refresh" data-placement="bottom"><i class="fa fa-refresh"></i></a>
                </div>
            </div>
            <div class="panel-body">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="panel panel-default">
                        @*<div class="panel-heading">
                    Costos - Asesoria y Consultoria
                </div>*@
                        <div class="panel-body">
                            <div id="IdYearToDate" style="width: 100%; height: 500px;"></div>
                        </div>

                    </div>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="panel panel-default">
                        @*<div class="panel-heading">
                    Costos - Asesoria y Consultoria
                </div>*@
                        <div class="panel-body">
                            <div id="IdMothToDate" style="width: 100%; height: 500px;"></div>
                        </div>

                    </div>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="panel panel-default">
                        @*<div class="panel-heading">
                    Costos - Asesoria y Consultoria
                </div>*@
                        <div class="panel-body">

                            <div id="IdTotalGastos" style="width: 100%; height: 500px;"></div>
                        </div>

                    </div>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="panel panel-default">
                        @*<div class="panel-heading">
                    Costos - Mercaderias
                </div>*@
                        <div class="panel-body">
                            <div id="IdCostos" style="width: 100%; height: 500px;"></div>
                        </div>

                    </div>
                </div>

                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                    <div class="panel panel-default">
                        @*<div class="panel-heading">
                    Costos - Mercaderias
                </div>*@
                        <div class="panel-body">
                            <div id="IdCostos601" @*style="width: 100%; height: 300px;" *@></div>
                        </div>

                    </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                    <div class="panel panel-default">
                        @*<div class="panel-heading">
                    Costos - Asesoria y Consultoria
                </div>*@
                        <div class="panel-body">

                            <div id="IdCostos632" @*style="width: 100%; height: 300px;" *@></div>
                        </div>

                    </div>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="panel panel-default">
                        @*<div class="panel-heading">
                    Costos - Mercaderias
                </div>*@
                        <div class="panel-body">
                            <textarea id="IdGraficoBanco" class="form-control"></textarea>
                        </div>

                    </div>
                </div>

            </div>

        </div>
    </div>
</div>
<p id="IdLoading"></p>
<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="panel panel-warning">
            <div class="panel-heading">
                Inversion Activos - Copper
                <a id="btnCapturar" class="btn btn-primary">Capturar</a>
                <div class="panel-controls">
                    <a href="javascript:void(0);" id="btnRefrescar" data-panel-loading="true" data-loading-effect="rotateplane" data-loading-color="#16a085" data-toggle="tooltip" data-title="Refresh" data-placement="bottom"><i class="fa fa-refresh"></i></a>
                </div>
            </div>
            <div class="panel-body">
                <div id="IdInventarios" style="display:none;width: 100%;" @*style="width: 100%; height: 300px;" *@></div>
                <div id="IdBancos" style="width: 100%;" @*style="width: 100%; height: 100px;" *@></div>
                <div id="IdPrestamos" style="display: none; width: 100%; height: 300px;"></div>
                <div id="IdActivos" style="display: none; width: 100%; height: 600px;"></div>
                <div id="IdAdelantos" style="display: none; width: 100%;" @*style="width: 100%; height: 100px;"*@></div>

            </div>

        </div>
    </div>
</div>
<div id='loader' style='display: none;'>
    <img src='reload.gif' ancho='32px' alto='32px'>
</div>
<div class="row" @*style="display:none"*@>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="panel panel-success">
            <div class="panel-heading">
                Grafico Circular - Copper
                <div class="panel-controls">
                    <a href="javascript:void(0);" data-panel-loading="true" data-loading-effect="rotateplane" data-loading-color="#16a085" data-toggle="tooltip" data-title="Refresh" data-placement="bottom"><i class="fa fa-refresh"></i></a>
                </div>
            </div>
            <div class="panel-body">
                <textarea id="IdGraficoBanco" class="form-control"></textarea>
                <textarea id="IdGraficoInventarios" class="form-control"></textarea>
                <textarea id="IdGraficoPrestamos" class="form-control"></textarea>
                <textarea id="IdGraficoActivos" class="form-control"></textarea>
                <textarea id="IdGraficoAdelantos" class="form-control"></textarea>
                <textarea id="IdGraficoCostos" class="form-control"></textarea>
                <textarea id="IdGraficoCostos632" class="form-control"></textarea>
                <textarea id="IdGraficoCostos601" class="form-control"></textarea>
                <textarea id="IdGraficoTotalGastos" class="form-control"></textarea>
                <textarea id="IdGraficoYearToDate" class="form-control"></textarea>
                <textarea id="IdGraficoMothToDate" class="form-control"></textarea>
            </div>

        </div>
    </div>
</div>

@section scripts{
    <script>
        window.onload = function () {
            var fecha = new Date(); //Fecha actual
            var mes = fecha.getMonth() + 1; //obteniendo mes
            var dia = fecha.getDate(); //obteniendo dia
            var ano = fecha.getFullYear(); //obteniendo año
            if (dia < 10)
                dia = '0' + dia; //agrega cero si el menor de 10
            if (mes < 10)
                mes = '0' + mes //agrega cero si el menor de 10
            document.getElementById('txtFechaConsulta').value = ano + "-" + mes + "-" + dia;
        }
    </script>
    <script>
        var i = 0;
        $("#btnCapturar").click(function () {
            var IdGraficoBanco = $("#IdGraficoBanco").val();
            IdGraficoBanco = IdGraficoBanco.replace(/^data:image\/(png|jpg);base64,/, "");
            var IdGraficoInventarios = $("#IdGraficoInventarios").val();
            IdGraficoInventarios = IdGraficoInventarios.replace(/^data:image\/(png|jpg);base64,/, "");
            var IdGraficoPrestamos = $("#IdGraficoPrestamos").val();
            IdGraficoPrestamos = IdGraficoPrestamos.replace(/^data:image\/(png|jpg);base64,/, "");
            var IdGraficoActivos = $("#IdGraficoActivos").val();
            IdGraficoActivos = IdGraficoActivos.replace(/^data:image\/(png|jpg);base64,/, "");
            var IdGraficoAdelantos = $("#IdGraficoAdelantos").val();
            IdGraficoAdelantos = IdGraficoAdelantos.replace(/^data:image\/(png|jpg);base64,/, "");

            var grafico = {};
            grafico.GraficoInventarios = IdGraficoInventarios;
            grafico.GraficoBancos = IdGraficoBanco;
            grafico.GraficoPrestamos = IdGraficoPrestamos;
            grafico.GraficoActivos = IdGraficoActivos;
            grafico.GraficoAdelantos = IdGraficoAdelantos;
            console.log(grafico);

            $.ajax({
                type: "POST",
                url: "/Copper/Create",
                data: '{objGrafico: ' + JSON.stringify(grafico) + '}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                beforeSend: function () {
                    $('#IdLoading').html("Cargando..."); //"<img src='/images/loading.gif' />");
                    //alert("Iniciando");
                    //$('#btnRefrescar').click();
                    $("#loader").show();
                },
                success: function (r) {
                    alert(r);
                },
                error: function (r) {
                    alert(r.d);
                },
                complete: function () {
                    i--;
                    if (i <= 0) {
                        //$(placeholder).removeClass('loading');
                        //alert("Completo");
                        //$('#IdLoading').html("Carga completo...");
                        $("#loader").hide();
                    }
                },
            });
            return false;
        });
    </script>
    <script>
        $("#btnConsultaHoy").click(function () {
            var fechaConsulta = $("#txtFechaConsulta").val();
            //alert(fechaConsulta);
            drawChart(fechaConsulta);
        });
    </script>
    <script>
        google.load("visualization", "1", { packages: ["corechart"] });
        //google.setOnLoadCallback(drawChart);
        //google.setOnLoadCallback(drawChart1);
        //var fechaConsulta = '2021-02-18';
        function drawChart(fechaConsulta) {
            /*=============== INVENTARIOS =====================*/
            $.ajax({
                type: "POST",
                url: "/Copper/GraficoInventarios",
                //data: '{}',
                data: JSON.stringify({ fecha: fechaConsulta }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    debugger;
                    console.log(r.total);
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'Date');
                    data.addColumn('number', 'Cuentas');
                    data.addColumn({ type: 'number', role: 'annotation' }); // annotation role col.
                    data.addRows(r);
                    var options = {
                        title: "[00 - Inventarios] ",
                        //width: 600,
                        //height: 400,
                        bar: { groupWidth: "95%" },
                        legend: { position: "none" },
                        hAxis: {
                            maxTextLines: 10,
                            textStyle: {
                                fontSize: 14,
                            }
                        }
                    };
                    var ColumnChart_div = document.getElementById('IdInventarios');
                    var ColumnChartchart = new google.visualization.ColumnChart(ColumnChart_div);
                    google.visualization.events.addListener(ColumnChartchart, 'ready', function () {
                        $("#IdGraficoInventarios").val(ColumnChartchart.getImageURI());
                    });
                    ColumnChartchart.draw(data, options);
                },
                failure: function (r) {
                    alert(r.d);
                },
                error: function (r) {
                    alert(r.d);
                }
            });
            /*=============== BANCOS =====================*/
            $.ajax({
                type: "POST",
                url: "/Copper/GraficoBancos",
                //data: '{}',
                data: JSON.stringify({ fecha: fechaConsulta }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //debugger;
                    console.log(r);
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'Date');
                    data.addColumn('number', 'Cuentas');
                    data.addColumn({ type: 'number', role: 'annotation' }); // annotation role col.
                    data.addRows(r);
                    var options = {
                        title: "[10 - Bancos] ",
                        //width: 600,
                        //height: 400,
                        bar: { groupWidth: "95%" },
                        legend: { position: "none" },
                        hAxis: {
                            maxTextLines: 10,
                            textStyle: {
                                fontSize: 14,
                            }
                        }
                    };
                    var ColumnChart_div = document.getElementById('IdBancos');
                    var ColumnChartchart = new google.visualization.ColumnChart(ColumnChart_div);
                    google.visualization.events.addListener(ColumnChartchart, 'ready', function () {
                        $("#IdGraficoBanco").val(ColumnChartchart.getImageURI());
                    });
                    ColumnChartchart.draw(data, options);
                },
                failure: function (r) {
                    alert(r.d);
                },
                error: function (r) {
                    alert(r.d);
                }
            });
            /*=============== PRESTAMOS =====================*/
            $.ajax({
                type: "POST",
                url: "/Copper/GraficoPrestamos",
                //data: '{}',
                data: JSON.stringify({ fecha: fechaConsulta }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //debugger;
                    //console.log(r.total);
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'Date');
                    data.addColumn('number', 'Cuentas');
                    data.addColumn({ type: 'number', role: 'annotation' }); // annotation role col.
                    data.addRows(r);
                    var options = {
                        title: "[20 - Prestamos] ",
                        //width: 600,
                        //height: 400,
                        bar: { groupWidth: "95%" },
                        legend: { position: "none" },
                        hAxis: {
                            maxTextLines: 10,
                            textStyle: {
                                fontSize: 14,
                            }
                        }
                    };
                    var ColumnChart_div = document.getElementById('IdPrestamos');
                    var ColumnChartchart = new google.visualization.ColumnChart(ColumnChart_div);
                    google.visualization.events.addListener(ColumnChartchart, 'ready', function () {
                        $("#IdGraficoPrestamos").val(ColumnChartchart.getImageURI());
                    });
                    ColumnChartchart.draw(data, options);
                },
                failure: function (r) {
                    alert(r.d);
                },
                error: function (r) {
                    alert(r.d);
                }
            });
            /*=============== ACTIVOS =====================*/
            $.ajax({
                type: "POST",
                url: "/Copper/GraficoActivos",
                //data: '{}',
                data: JSON.stringify({ fecha: fechaConsulta }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //debugger;
                    //console.log(r.total);
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'Date');
                    data.addColumn('number', 'Cuentas');
                    data.addColumn({ type: 'number', role: 'annotation' }); // annotation role col.
                    data.addRows(r);
                    var options = {
                        title: "[30 - Activos] ",
                        //width: 600,
                        //height: 400,
                        bar: { groupWidth: "95%" },
                        legend: { position: "none" },
                        hAxis: {
                            maxTextLines: 10,
                            textStyle: {
                                fontSize: 14,
                            }
                        }
                    };
                    var ColumnChart_div = document.getElementById('IdActivos');
                    var ColumnChartchart = new google.visualization.ColumnChart(ColumnChart_div);
                    google.visualization.events.addListener(ColumnChartchart, 'ready', function () {
                        $("#IdGraficoActivos").val(ColumnChartchart.getImageURI());
                    });
                    ColumnChartchart.draw(data, options);
                },
                failure: function (r) {
                    alert(r.d);
                },
                error: function (r) {
                    alert(r.d);
                }
            });
            /*=============== ADELANTOS =====================*/
            $.ajax({
                type: "POST",
                url: "/Copper/GraficoAdelantos",
                //data: '{}',
                data: JSON.stringify({ fecha: fechaConsulta }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //debugger;
                    //console.log(r.total);
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'Date');
                    data.addColumn('number', 'Cuentas');
                    data.addColumn({ type: 'number', role: 'annotation' }); // annotation role col.
                    data.addRows(r);
                    var options = {
                        title: "[40 - Adelantos] ",
                        //width: 600,
                        //height: 400,
                        bar: { groupWidth: "95%" },
                        legend: { position: "none" },
                        hAxis: {
                            maxTextLines: 10,
                            textStyle: {
                                fontSize: 14,
                            }
                        }
                    };
                    var ColumnChart_div = document.getElementById('IdAdelantos');
                    var ColumnChartchart = new google.visualization.ColumnChart(ColumnChart_div);
                    google.visualization.events.addListener(ColumnChartchart, 'ready', function () {
                        $("#IdGraficoAdelantos").val(ColumnChartchart.getImageURI());
                    });
                    ColumnChartchart.draw(data, options);
                },
                failure: function (r) {
                    alert(r.d);
                },
                error: function (r) {
                    alert(r.d);
                }
            });
            /*=============== COSTOS =====================*/
            $.ajax({
                type: "POST",
                url: "/Copper/GraficoCosto",
                //data: '{}',
                data: JSON.stringify({ fecha: fechaConsulta }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //debugger;
                    console.log(r);
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'Date');
                    data.addColumn('number', 'Cuentas');
                    data.addColumn({ type: 'string', role: 'annotation' }); // annotation role col.
                    data.addRows(r);
                    var options = {
                        title: "[020 - Costos] ",
                        //width: 600,
                        //height: 400,
                        bar: { groupWidth: "100%" },
                        legend: { position: "none" },
                        hAxis: {
                            maxTextLines: 10,
                            textStyle: {
                                fontSize: 14,
                            }
                        }
                    };
                    var ColumnChart_div = document.getElementById('IdCostos');
                    var ColumnChartchart = new google.visualization.ColumnChart(ColumnChart_div);
                    google.visualization.events.addListener(ColumnChartchart, 'ready', function () {
                        $("#IdGraficoCostos").val(ColumnChartchart.getImageURI());
                    });
                    ColumnChartchart.draw(data, options);
                },
                failure: function (r) {
                    alert(r.d);
                },
                error: function (r) {
                    alert(r.d);
                }
            });
            /*=============== DETALLE COSTO 632 =====================*/
            $.ajax({
                type: "POST",
                url: "/Copper/GraficoCosto632",
                //data: '{}',
                data: JSON.stringify({ fecha: fechaConsulta }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //debugger;
                    console.log(r);
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'Date');
                    data.addColumn('number', 'Cuentas');
                    data.addColumn({ type: 'number', role: 'annotation' }); // annotation role col.
                    data.addRows(r);
                    var options = {
                        'title': "[Costos - Asesoria y Consultoria - 632] ",
                        width: '100%',
                        height: '340',
                        chartArea: {
                            left: 5,
                            top: 20,
                            width: '100%',
                            height: '300',
                        }
                    };
                    var ColumnChart_div = document.getElementById('IdCostos632');
                    var ColumnChartchart = new google.visualization.PieChart(ColumnChart_div);
                    google.visualization.events.addListener(ColumnChartchart, 'ready', function () {
                        $("#IdGraficoCostos632").val(ColumnChartchart.getImageURI());
                    });
                    ColumnChartchart.draw(data, options);
                },
                failure: function (r) {
                    alert(r.d);
                },
                error: function (r) {
                    alert(r.d);
                }
            });
            /*=============== DETALLE COSTO 601 =====================*/
            $.ajax({
                type: "POST",
                url: "/Copper/GraficoCosto601",
                //data: '{}',
                data: JSON.stringify({ fecha: fechaConsulta }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //debugger;
                    console.log(r);
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'Date');
                    data.addColumn('number', 'Cuentas');
                    data.addColumn({ type: 'number', role: 'annotation' }); // annotation role col.
                    data.addRows(r);
                    var options = {
                        'title': "[Costos - Mercaderias - 601] ",
                        width: '100%',
                        height: '340',
                        chartArea: {
                            left: 5,
                            top: 20,
                            width: '100%',
                            height: '300',
                        }
                    };
                    var ColumnChart_div = document.getElementById('IdCostos601');
                    var ColumnChartchart = new google.visualization.PieChart(ColumnChart_div);
                    google.visualization.events.addListener(ColumnChartchart, 'ready', function () {
                        $("#IdGraficoCostos601").val(ColumnChartchart.getImageURI());
                    });
                    ColumnChartchart.draw(data, options);
                },
                failure: function (r) {
                    alert(r.d);
                },
                error: function (r) {
                    alert(r.d);
                }
            });
            /*=============== TOTAL GASTOS =====================*/
            $.ajax({
                type: "POST",
                url: "/Copper/GraficoTotalGastos",
                //data: '{}',
                data: JSON.stringify({ fecha: fechaConsulta }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //debugger;
                    console.log(r);
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'Date');
                    data.addColumn('number', 'Cuentas');
                    data.addColumn({ type: 'string', role: 'annotation' }); // annotation role col.
                    data.addRows(r);
                    var options = {
                        title: "[Total Gastos] ",
                        //width: 600,
                        //height: 400,
                        bar: { groupWidth: "100%" },
                        legend: { position: "none" },
                        hAxis: {
                            maxTextLines: 10,
                            textStyle: {
                                fontSize: 14,
                            }
                        }
                    };
                    var ColumnChart_div = document.getElementById('IdTotalGastos');
                    var ColumnChartchart = new google.visualization.ColumnChart(ColumnChart_div);
                    google.visualization.events.addListener(ColumnChartchart, 'ready', function () {
                        $("#IdGraficoTotalGastos").val(ColumnChartchart.getImageURI());
                    });
                    ColumnChartchart.draw(data, options);
                },
                failure: function (r) {
                    alert(r.d);
                },
                error: function (r) {
                    alert(r.d);
                }
            });
            /*=============== YEAR TO DAY =====================*/
            $.ajax({
                type: "POST",
                url: "/Copper/GraficoYearToDate",
                //data: '{}',
                data: JSON.stringify({ fecha: fechaConsulta }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //debugger;
                    console.log(r);
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'Date');
                    data.addColumn('number', 'Ingreso');
                    data.addColumn('number', 'Egreso');
                    data.addColumn('number', 'Margen');
                   // data.addColumn({ type: 'string', role: 'annotation' }); // annotation role col.
                    data.addRows(r);
                    var options = {
                        title: "[YEAR TO DATE] ",
                        //width: 600,
                        //height: 400,
                        bar: { groupWidth: "100%" },
                        //legend: { position: "none" },
                        legend: { position: 'bottom' },
                        hAxis: {
                            maxTextLines: 10,
                            textStyle: {
                                fontSize: 14,
                            }
                        }
                    };
                    var ColumnChart_div = document.getElementById('IdYearToDate');
                    var ColumnChartchart = new google.visualization.LineChart(ColumnChart_div);
                    google.visualization.events.addListener(ColumnChartchart, 'ready', function () {
                        $("#IdGraficoYearToDate").val(ColumnChartchart.getImageURI());
                    });
                    ColumnChartchart.draw(data, options);
                },
                failure: function (r) {
                    alert(r.d);
                },
                error: function (r) {
                    alert(r.d);
                }
            });
            /*=============== YEAR TO DAY =====================*/
            $.ajax({
                type: "POST",
                url: "/Copper/GraficoMothToDate",
                //data: '{}',
                data: JSON.stringify({ fecha: fechaConsulta }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //debugger;
                    console.log(r);
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'Date');
                    data.addColumn('number', 'Ingreso');
                    data.addColumn('number', 'Egreso');
                    data.addColumn('number', 'Margen');
                   // data.addColumn({ type: 'string', role: 'annotation' }); // annotation role col.
                    data.addRows(r);
                    var options = {
                        title: "[MOTH TO DATE] ",
                        //width: 600,
                        //height: 400,
                        bar: { groupWidth: "100%" },
                        //legend: { position: "none" },
                        legend: { position: 'bottom' },
                        hAxis: {
                            maxTextLines: 10,
                            textStyle: {
                                fontSize: 14,
                            }
                        }
                    };
                    var ColumnChart_div = document.getElementById('IdMothToDate');
                    var ColumnChartchart = new google.visualization.LineChart(ColumnChart_div);
                    google.visualization.events.addListener(ColumnChartchart, 'ready', function () {
                        $("#IdGraficoMothToDate").val(ColumnChartchart.getImageURI());
                    });
                    ColumnChartchart.draw(data, options);
                },
                failure: function (r) {
                    alert(r.d);
                },
                error: function (r) {
                    alert(r.d);
                }
            });
            return false;
        }
    </script>

}
